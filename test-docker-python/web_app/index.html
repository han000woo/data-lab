<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë„ì»¤ ë°ì´í„° íŒŒì´í”„ë¼ì¸</title>
    <style>
        body { font-family: sans-serif; margin: 2em; background-color: #f4f4f9; }
        h1 { color: #333; }
        #loading { font-style: italic; color: #777; }
        #post-list { list-style: none; padding: 0; }
        #post-list li { 
            background-color: #fff; 
            border: 1px solid #ddd; 
            margin-bottom: 10px; 
            padding: 15px; 
            border-radius: 5px;
        }
        #post-list li strong { color: #0056b3; }
    </style>
</head>
<body>

    <h1>ğŸš€ FastAPIì—ì„œ ê°€ì ¸ì˜¨ ë°ì´í„°</h1>

    <p id="loading">ë°ì´í„° ë¡œë”© ì¤‘...</p>

    <ul id="post-list">
        </ul>

    <script>
        // ì´ ìŠ¤í¬ë¦½íŠ¸ëŠ” ì‚¬ìš©ìì˜ 'ì›¹ ë¸Œë¼ìš°ì €'ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.
        document.addEventListener('DOMContentLoaded', () => {
            const listElement = document.getElementById('post-list');
            const loadingElement = document.getElementById('loading');

            // ë¸Œë¼ìš°ì €ê°€ localhostì˜ 8000ë²ˆ í¬íŠ¸(FastAPI ì„œë²„)ì— ë°ì´í„°ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤.
            fetch('http://121.162.95.145:8000/posts')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('API ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                    }
                    return response.json();
                })
                .then(data => {
                    loadingElement.style.display = 'none'; // 'ë¡œë”© ì¤‘...' ë©”ì‹œì§€ ìˆ¨ê¸°ê¸°

                    // ë°›ì€ ë°ì´í„°(ë°°ì—´)ë¥¼ ìˆœíšŒí•˜ë©° <li> íƒœê·¸ë¡œ ë§Œë“­ë‹ˆë‹¤.
                    data.forEach(post => {
                        const li = document.createElement('li');
                        li.innerHTML = `<strong>Post ID: ${post.post_id}</strong> (User ID: ${post.userId})<br>${post.title}`;
                        listElement.appendChild(li);
                    });
                })
                .catch(error => {
                    console.error('Fetch ì—ëŸ¬:', error);
                    loadingElement.textContent = `âŒ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨! API ì„œë²„(api)ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•˜ì„¸ìš”. (ì˜¤ë¥˜: ${error.message})`;
                    loadingElement.style.color = 'red';
                });
        });
    </script>

</body>
</html>

